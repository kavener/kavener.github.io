<h1 align="center">Data Files</h1>

<p>Currently, it is not smooth to update NexT theme from pulling or downloading new releases. It is quite often running into conflict status when updating NexT theme via <code>git pull</code>, or need to merge configurations manually when upgrading to new releases.</p>
<p> At present, NexT encourages users to store some options in site’s <code>_config.yml</code> and other options in theme’s <code>_config.yml</code>. This approach is applicable, but has some drawbacks:</p>
<ol>
<li>Configurations are splitted into two pieces</li>
<li>Users may be confused which place should be for options</li>
</ol>
<p>In order to resolve this issue, NexT will take advantage of Hexo <a href="https://hexo.io/docs/data-files.html">Data files</a>. Because Data files is introduced in Hexo 3, so you need upgrade Hexo to 3.0 (or above) to use this feature.</p>
<p>If you prefer Hexo 2.x, you can still use the old approach for configurations. NexT is still compatible with Hexo 2.x (but errors are possible).</p>
<h2 align="center">Option 1: Hexo-Way</h2>

<p>With this way, all your configurations locate in main hexo config file (<code>hexo/_config.yml</code>), you don’t need to touch <code>next/_config.yml</code> or create any new files. But you must preserve double spaces indents within <code>theme_config</code> option.</p>
<p>If there are any new options in new releases, you just need to copy those options from <code>next/_config.yml</code>, paste into <code>hexo/_config.yml</code> and set their values to whatever you want.</p>
<h3 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h3><ol>
<li>Check for no exists <code>hexo/source/_data/next.yml</code> file (delete it if exists).</li>
<li>Copy needed NexT theme options from theme’s <code>next/_config.yml</code> into <code>hexo/_config.yml</code>, then\<br>2.1. Move all this settings to the right with two spaces (in Visual Studio Code: select all strings, <kbd>CTRL</kbd> + <kbd>]</kbd>).\<br>2.2. Add <code>theme_config:</code> parameter above all this settings.</li>
</ol>
<h3 id="Useful-links"><a href="#Useful-links" class="headerlink" title="Useful links"></a>Useful links</h3><ul>
<li><a href="https://hexo.io/docs/configuration.html">Hexo Configuration</a></li>
<li><a href="https://github.com/hexojs/hexo/pull/757">Hexo Pull #757</a></li>
</ul>
<h2 align="center">Option 2: NexT-Way</h2>

<p>With this way, you can put all your configurations into one place (<code>source/_data/next.yml</code>), you don’t need to touch <code>next/_config.yml</code>.<br>But option may not accurately procces all hexo external libraries with their additional options (for example, <code>hexo-server</code> module options may be readed only in default hexo config).</p>
<p>If there are any new options in new releases, you just need to copy those options from <code>next/_config.yml</code>, paste into <code>_data/next.yml</code> and set their values to whatever you want.</p>
<h3 id="Usage-1"><a href="#Usage-1" class="headerlink" title="Usage"></a>Usage</h3><ol>
<li>Please ensure you are using Hexo 3 (or above).</li>
<li>Create an file named <code>next.yml</code> in site’s <code>hexo/source/_data</code> directory (create <code>_data</code> directory if it did not exists).</li>
</ol>
<p align="center">And after that steps there are <b>2 variants</b>, need to <b>choose only one</b> of them and <b>resume next steps</b>.</p>

<ul>
<li><p><strong>Variant 1: <code>override: false</code> (default)</strong>:</p>
<ol>
<li>Check your <code>override</code> option in default NexT config, it must set on <code>false</code>.\<br>In <code>next.yml</code> it must not be defined or set on <code>false</code> too.</li>
<li>Copy needed options from both site’s <code>_config.yml</code> and theme’s <code>_config.yml</code> into <code>hexo/source/_data/next.yml</code>.</li>
</ol>
</li>
<li><p><strong>Variant 2: <code>override: true</code></strong>:</p>
<ol>
<li>In <code>next.yml</code> set <code>override</code> option on <code>true</code>.</li>
<li>Copy <strong>all</strong> NexT theme options from theme’s <code>next/_config.yml</code> into <code>hexo/source/_data/next.yml</code>.</li>
</ol>
</li>
</ul>
<ol start="3">
<li>Then, in main site’s <code>hexo/_config.yml</code> need to define <code>theme: next</code> option (and if needed, <code>source_dir: source</code>).</li>
<li>Use standart parameters to start server, generate or deploy (<code>hexo clean &amp;&amp; hexo g -d &amp;&amp; hexo s</code>).</li>
</ol>
<h3 id="Useful-links-1"><a href="#Useful-links-1" class="headerlink" title="Useful links"></a>Useful links</h3><ul>
<li><a href="https://github.com/iissnan/hexo-theme-next/issues/328">NexT Issue #328</a></li>
</ul>
