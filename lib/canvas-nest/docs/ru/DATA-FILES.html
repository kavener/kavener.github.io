<h1 align="center">Дата Файлы</h1>

<p>Обновление темы NexT через пулы проходит не слишком гладко. Часто происходит конфликтная ситуация при обновлении по команде <code>git pull</code>, хотя её и можно обойти, если смерджить настройки в файле конфигурации вручную.</p>
<p> На данный момент, пользователи хранят одни настройки в корневом <code>_config.yml</code> (Hexo), а другие настройки в конфиге темы <code>_config.yml</code> (NexT). И всё вроде бы ничего, но имеются некоторые недостатки:</p>
<ol>
<li>Конфигурация разделяется на две части.</li>
<li>Пользователи могут запутаться, в каком файле какие должны быть настройки.</li>
</ol>
<p>Во избежании проблемы, NexT использует преимущество Hexo <a href="https://hexo.io/docs/data-files.html">дата-файлов</a>. И т.к. дата-файлы были представлены в Hexo 3, необходимо обновиться до Hexo 3.0 (или выше) для использования этой возможности.</p>
<p>Если же Вы предпочитаете Hexo 2.x, то можно использовать старый способ для конфигураций. NexT всё ещё совместим с Hexo 2.x (но возможны ошибки).</p>
<h2 align="center">Способ 1: Hexo-Путь</h2>

<p>Используя этот способ, вся конфигурация будет раположена в корневом конфиге hexo (<code>hexo/_config.yml</code>), благодаря чему нет необходимости изменять оригинальный конфиг темы (<code>next/_config.yml</code>) или создавать какие-либо новые файлы. Но в этом случае необходимо сохранять двойные отступы внутри <code>theme_config</code> параметра.</p>
<p>Если в новых версиях появятся какие-то новые настройки, нужно просто скопировать эти настройки из оригинального <code>next/_config.yml</code> в редактируемый <code>hexo/_config.yml</code> и настроить по своему усмотрению.</p>
<h3 id="Использование"><a href="#Использование" class="headerlink" title="Использование"></a>Использование</h3><ol>
<li>Проверяем на существование <code>hexo/source/_data/next.yml</code> файл (удаляем, если существует).</li>
<li>Копируем необходимые опции из конфига темы NexT <code>next/_config.yml</code> в <code>hexo/_config.yml</code>, затем\<br>2.1. Сдвигаем все опции вправо на 2 пробела (в Visual Studio Code: выделяем все строки, <kbd>CTRL</kbd> + <kbd>]</kbd>).\<br>2.2. Добавляем <code>theme_config:</code> параметр перед всеми этими настройками.</li>
</ol>
<h3 id="Полезные-ссылки"><a href="#Полезные-ссылки" class="headerlink" title="Полезные ссылки"></a>Полезные ссылки</h3><ul>
<li><a href="https://hexo.io/ru/docs/configuration.html">Конфигурация Hexo</a></li>
<li><a href="https://github.com/hexojs/hexo/pull/757">Hexo Pull #757</a></li>
</ul>
<h2 align="center">Способ 2: NexT-Путь</h2>

<p>Используя этот способ, вся конфигурация будет храниться в одном файле (<code>source/_data/next.yml</code>), благодаря чему нет необходимости изменять оригинальный конфиг темы (<code>next/_config.yml</code>).<br>Но с этим способом могут не корректно обрабатываться все внешние библиотеки hexo при использовании их дополнительных опций (например, опции модуля <code>hexo-server</code> могут быть считаны только из стандартного конфига hexo).</p>
<p>Если в новых версиях появятся какие-то новые настройки, нужно просто скопировать эти настройки из оригинального <code>next/_config.yml</code> во внешний <code>_data/next.yml</code> и настроить по своему усмотрению.</p>
<h3 id="Использование-1"><a href="#Использование-1" class="headerlink" title="Использование"></a>Использование</h3><ol>
<li>Убеждаемся, что Hexo версии 3 (или выше).</li>
<li>Создаём файл под именем <code>next.yml</code> в корневой директории сайта — <code>hexo/source/_data</code> (создаём директорию <code>_data</code>, если отсутствует).</li>
</ol>
<p align="center">И после этих шагов есть <b>2 варианта</b>, нужно <b>выбрать только 1</b> из них и <b>продолжить следующие шаги</b>.</p>

<ul>
<li><p><strong>Вариант 1: <code>override: false</code> (по-умолчанию)</strong>:</p>
<ol>
<li>Проверяем опцию <code>override</code> в стандартном конфиге NexT’а, должно быть установлено в <code>false</code>.\<br>В файле <code>next.yml</code> эта опция не должна быть вписана вовсе или вписана и установлена в <code>false</code>.</li>
<li>Копируем настройки из конфига темы NexT (<code>_config.yml</code>) и из корневого конфига сайта (<code>_config.yml</code>) в файл <code>hexo/source/_data/next.yml</code>.</li>
</ol>
</li>
<li><p><strong>Вариант 2: <code>override: true</code></strong>:</p>
<ol>
<li>В файле <code>next.yml</code> ставим опцию <code>override</code> в <code>true</code>.</li>
<li>Копируем <strong>все</strong> опции из оригинального конфига NexT’а <code>next/_config.yml</code> в <code>hexo/source/_data/next.yml</code>.</li>
</ol>
</li>
</ul>
<ol start="3">
<li>Затем, в корневом конфиге сайта <code>hexo/_config.yml</code> необходимо установить опцию <code>theme: next</code> (и если требуется, <code>source_dir: source</code>).</li>
<li>Используем станадартные параметры для запускаь генерации или развёртывания (<code>hexo clean &amp;&amp; hexo g -d &amp;&amp; hexo s</code>).</li>
</ol>
<h3 id="Полезные-ссылки-1"><a href="#Полезные-ссылки-1" class="headerlink" title="Полезные ссылки"></a>Полезные ссылки</h3><ul>
<li><a href="https://github.com/iissnan/hexo-theme-next/issues/328">NexT Issue #328</a></li>
</ul>
